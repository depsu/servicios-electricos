---
import ServiceStatus from './ServiceStatus.astro';
import QuickForm from './QuickForm.astro';
import { siteConfig } from '../config/site';

interface Props {
    title: string;
    subtitle: string;
    bgImage: string;
    badgeText?: string;
    showStatus?: boolean;
    showQuickForm?: boolean;
    variant?: 'default' | 'centered' | 'minimal';
}

const { 
    title, 
    subtitle, 
    bgImage, 
    badgeText = "Especialistas en la Zona", 
    showStatus = true, 
    showQuickForm = false,
    variant = 'default'
} = Astro.props;

const { company } = siteConfig;
---

<header class="relative pt-32 pb-20 lg:pt-40 lg:pb-32 overflow-hidden bg-slate-900">
    <div class="absolute inset-0 w-full h-full overflow-hidden z-0">
        <img src={bgImage} alt={title} class="absolute top-0 left-0 w-full h-full object-cover opacity-40">
        <div class="absolute inset-0 bg-slate-900/60 z-10"></div>
        <div class="absolute top-0 right-0 w-[500px] h-[500px] bg-primary/30 rounded-full blur-[120px] z-10"></div>
    </div>

    <div class="container mx-auto px-4 relative z-20">
        
        {/* VARIANT: DEFAULT (Split Layout) */}
        {variant === 'default' && (
            <div class="grid lg:grid-cols-2 gap-12 items-center">
                <div class="text-center lg:text-left">
                    <div class="inline-flex items-center gap-2 border border-slate-600/50 bg-slate-800/50 backdrop-blur-sm rounded-full px-4 py-1.5 text-xs font-bold text-slate-300 mb-6 uppercase tracking-wider">
                        <i class="fa-solid fa-check text-primary"></i> {badgeText}
                    </div>

                    <h1 class="text-4xl md:text-6xl font-extrabold text-white mb-6 leading-[1.1] tracking-tight drop-shadow-lg" set:html={title}>
                    </h1>

                    <p class="text-lg text-slate-200 mb-8 max-w-xl mx-auto lg:mx-0 leading-relaxed font-medium">
                        {subtitle}
                    </p>

                    <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
                        <a href={`tel:${company.phone}`}
                            class="bg-white text-slate-900 font-bold py-4 px-8 rounded-xl shadow-[0_0_30px_rgba(255,255,255,0.2)] hover:shadow-[0_0_40px_rgba(255,255,255,0.4)] transition transform hover:-translate-y-1 flex items-center justify-center gap-3">
                            <i class="fa-solid fa-phone text-primary"></i> Llamar Ahora
                        </a>
                        <a href={`https://wa.me/${company.whatsapp}`}
                            class="bg-accent hover:bg-accent-hover text-white font-bold py-4 px-8 rounded-xl shadow-lg transition transform hover:-translate-y-1 flex items-center justify-center gap-3">
                            <i class="fa-brands fa-whatsapp text-xl"></i> WhatsApp Contacto
                        </a>
                    </div>
                </div>

                {/* Status Card or Quick Form */}
                {showStatus && !showQuickForm && (
                    <div class="hidden lg:flex justify-end">
                        <ServiceStatus 
                            title="Estado del Servicio"
                            statusText="Disponible"
                            items={[
                                { icon: "fa-solid fa-truck-fast", title: "Unidades Móviles", subtitle: "En ruta a tu ubicación" },
                                { icon: "fa-solid fa-clock", title: "Tiempo de Respuesta", subtitle: "Menos de 30 minutos" }
                            ]}
                        />
                    </div>
                )}
                
                {showQuickForm && (
                    <div class="hidden lg:block max-w-sm w-full">
                        <QuickForm 
                            title="Solicita tu Cotización"
                            buttonText="Enviar Solicitud"
                            variant="dark"
                        />
                    </div>
                )}
            </div>
        )}

        {/* VARIANT: CENTERED (For Landing Pages) */}
        {variant === 'centered' && (
            <div class="text-center max-w-4xl mx-auto">
                <div class="inline-flex items-center gap-2 border border-slate-600/50 bg-slate-800/50 backdrop-blur-sm rounded-full px-4 py-1.5 text-xs font-bold text-slate-300 mb-6 uppercase tracking-wider">
                    <i class="fa-solid fa-star text-yellow-400"></i> {badgeText}
                </div>
                <h1 class="text-5xl md:text-7xl font-extrabold text-white mb-8 leading-tight drop-shadow-2xl" set:html={title}></h1>
                <p class="text-xl md:text-2xl text-slate-200 mb-10 max-w-2xl mx-auto leading-relaxed">
                    {subtitle}
                </p>
                <div class="flex flex-col sm:flex-row gap-6 justify-center">
                    <a href={`https://wa.me/${company.whatsapp}`}
                        class="bg-accent hover:bg-accent-hover text-white text-lg font-bold py-4 px-10 rounded-full shadow-xl transition transform hover:scale-105 flex items-center justify-center gap-3">
                        <i class="fa-brands fa-whatsapp text-2xl"></i> Cotizar por WhatsApp
                    </a>
                    <a href="/contacto"
                        class="bg-white/10 hover:bg-white/20 backdrop-blur-md text-white border border-white/30 text-lg font-bold py-4 px-10 rounded-full transition flex items-center justify-center gap-3">
                        Ver Servicios
                    </a>
                </div>
            </div>
        )}

        {/* VARIANT: MINIMAL (For Internal Pages) */}
        {variant === 'minimal' && (
            <div class="text-center max-w-3xl mx-auto py-10">
                <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-4" set:html={title}></h1>
                <p class="text-lg text-slate-300">
                    {subtitle}
                </p>
            </div>
        )}

    </div>
</header>
