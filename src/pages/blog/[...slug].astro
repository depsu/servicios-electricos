---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.slug },
		props: post,
	}));
}

const post = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title} regionText="Blog">
    <article class="pt-32 pb-20">
        <!-- Header del Artículo -->
        <header class="container mx-auto px-4 max-w-4xl text-center mb-12">
            <div class="inline-block bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider mb-4">
                {post.data.tags[0] || 'Artículo'}
            </div>
            <h1 class="text-3xl md:text-5xl font-bold text-slate-900 mb-6 leading-tight">
                {post.data.title}
            </h1>
            <div class="flex items-center justify-center gap-4 text-slate-500 text-sm">
                <span><i class="fa-regular fa-calendar mr-2"></i>{post.data.pubDate.toLocaleDateString('es-CL')}</span>
                <span><i class="fa-regular fa-user mr-2"></i>{post.data.author}</span>
            </div>
        </header>

        <!-- Imagen Principal -->
        {post.data.image && (
            <div class="container mx-auto px-4 max-w-5xl mb-12">
                <img 
                    src={post.data.image} 
                    alt={post.data.title} 
                    class="w-full h-[400px] md:h-[500px] object-cover rounded-2xl shadow-lg"
                />
            </div>
        )}

        <!-- Contenido -->
        <div class="container mx-auto px-4 max-w-3xl prose prose-lg prose-slate prose-headings:font-bold prose-a:text-blue-600 hover:prose-a:text-blue-500">
            <Content />
        </div>

        <!-- Navegación Inferior -->
        <div class="container mx-auto px-4 max-w-3xl mt-16 pt-8 border-t border-slate-200 text-center">
            <a href="/blog" class="inline-flex items-center font-bold text-slate-700 hover:text-blue-600 transition-colors">
                <i class="fa-solid fa-arrow-left mr-2"></i> Volver al Blog
            </a>
        </div>
    </article>
</Layout>
